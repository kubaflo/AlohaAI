<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:AlohaAI.ViewModels"
             xmlns:ios="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.iOSSpecific;assembly=Microsoft.Maui.Controls"
             x:Class="AlohaAI.Views.SettingsPage"
             x:DataType="vm:SettingsViewModel"
             Title="Settings"
             Shell.NavBarIsVisible="False"
             SafeAreaEdges="None">
    <Grid SafeAreaEdges="None">
        <!-- Layer 0: Background Image -->
        <Image Source="bg_sunset.png" Aspect="AspectFill" InputTransparent="True" />
        <!-- Layer 1: Dark overlay for readability -->
        <BoxView Color="#2A000000" InputTransparent="True" />

    <ScrollView>
        <VerticalStackLayout Spacing="0">

            <!-- Gradient Header -->
            <Border StrokeShape="RoundRectangle 0,0,20,20" StrokeThickness="0">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#805B9FE6" Offset="0.0" />
                        <GradientStop Color="#807B68AE" Offset="0.5" />
                        <GradientStop Color="#802D1B69" Offset="1.0" />
                    </LinearGradientBrush>
                </Border.Background>
                <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12" Padding="20,70,20,20">
                    <Border BackgroundColor="#E81A1035" StrokeShape="RoundRectangle 12" StrokeThickness="0"
                            Padding="8,6" VerticalOptions="Center">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding GoBackCommand}" />
                        </Border.GestureRecognizers>
                        <Label Text="←" FontSize="18" TextColor="White" />
                    </Border>
                    <Label Grid.Column="1" Text="Settings" FontSize="24" FontAttributes="Bold"
                           TextColor="White" VerticalOptions="Center" />
                </Grid>
            </Border>

            <VerticalStackLayout Padding="20,20,20,100" Spacing="16">

                <!-- Appearance Section -->
                <Label Text="Appearance" FontSize="16" FontAttributes="Bold" TextColor="{StaticResource Gray300}" />

                <Border Style="{StaticResource GlassCard}" Padding="16">
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                        <Image Source="icon_clock.png" WidthRequest="22" HeightRequest="22" VerticalOptions="Center" />
                        <Label Grid.Column="1" Text="Dark Mode" FontSize="16" TextColor="White" VerticalOptions="Center" />
                        <Switch Grid.Column="2" IsToggled="{Binding IsDarkMode}" VerticalOptions="Center"
                                OnColor="{StaticResource Primary}" />
                    </Grid>
                </Border>

                <!-- About Section -->
                <Label Text="About" FontSize="16" FontAttributes="Bold" TextColor="{StaticResource Gray300}" Margin="0,8,0,0" />

                <Border Style="{StaticResource GlassCard}" Padding="16">
                    <VerticalStackLayout Spacing="12">
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Image Source="icon_applogo.png" WidthRequest="22" HeightRequest="22" VerticalOptions="Center" />
                            <Label Grid.Column="1" Text="Version" FontSize="15" TextColor="White" VerticalOptions="Center" />
                            <Label Grid.Column="2" Text="1.0.0" FontSize="15" TextColor="{StaticResource Gray300}" VerticalOptions="Center" />
                        </Grid>
                        <BoxView HeightRequest="0.5" Color="#20FFFFFF" />
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Image Source="icon_rocket.png" WidthRequest="22" HeightRequest="22" VerticalOptions="Center" />
                            <Label Grid.Column="1" Text="Framework" FontSize="15" TextColor="White" VerticalOptions="Center" />
                            <Label Grid.Column="2" Text=".NET MAUI" FontSize="15" TextColor="{StaticResource Gray300}" VerticalOptions="Center" />
                        </Grid>
                        <BoxView HeightRequest="0.5" Color="#20FFFFFF" />
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Image Source="icon_notebook.png" WidthRequest="22" HeightRequest="22" VerticalOptions="Center" />
                            <Label Grid.Column="1" Text="License" FontSize="15" TextColor="White" VerticalOptions="Center" />
                            <Label Grid.Column="2" Text="MIT" FontSize="15" TextColor="{StaticResource Gray300}" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Actions Section -->
                <Label Text="Actions" FontSize="16" FontAttributes="Bold" TextColor="{StaticResource Gray300}" Margin="0,8,0,0" />

                <Border Style="{StaticResource GlassCard}" Padding="16">
                    <VerticalStackLayout Spacing="12">
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding OpenGitHubCommand}" />
                            </Grid.GestureRecognizers>
                            <Image Source="icon_books.png" WidthRequest="22" HeightRequest="22" VerticalOptions="Center" />
                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                                <Label Text="GitHub Repository" FontSize="15" TextColor="White" />
                                <Label Text="View source code &amp; contribute" FontSize="12" TextColor="{StaticResource Gray400}" />
                            </VerticalStackLayout>
                            <Label Grid.Column="2" Text="→" FontSize="16" TextColor="{StaticResource Gray400}" VerticalOptions="Center" />
                        </Grid>
                        <BoxView HeightRequest="0.5" Color="#20FFFFFF" />
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding ShowOnboardingCommand}" />
                            </Grid.GestureRecognizers>
                            <Image Source="icon_explore.png" WidthRequest="22" HeightRequest="22" VerticalOptions="Center" />
                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                                <Label Text="Show Welcome Screen" FontSize="15" TextColor="White" />
                                <Label Text="View the onboarding experience again" FontSize="12" TextColor="{StaticResource Gray400}" />
                            </VerticalStackLayout>
                            <Label Grid.Column="2" Text="→" FontSize="16" TextColor="{StaticResource Gray400}" VerticalOptions="Center" />
                        </Grid>
                        <BoxView HeightRequest="0.5" Color="#20FFFFFF" />
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12">
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding ResetProgressCommand}" />
                            </Grid.GestureRecognizers>
                            <Image Source="icon_trophy.png" WidthRequest="22" HeightRequest="22" VerticalOptions="Center"
                                   Opacity="0.6" />
                            <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                                <Label Text="Reset Progress" FontSize="15" TextColor="{StaticResource ErrorColor}" />
                                <Label Text="Clear all lesson progress and streaks" FontSize="12" TextColor="{StaticResource Gray400}" />
                            </VerticalStackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!-- Footer -->
                <VerticalStackLayout Spacing="4" HorizontalOptions="Center" Margin="0,16,0,20">
                    <Label Text="AlohaAI" FontSize="13" FontAttributes="Bold" TextColor="{StaticResource Gray400}" HorizontalOptions="Center" />
                    <Label Text="Open source • MIT License" FontSize="12" TextColor="{StaticResource Gray500}" HorizontalOptions="Center" />
                </VerticalStackLayout>

            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
    </Grid>
</ContentPage>
